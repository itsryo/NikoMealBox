@section topCSS{

    <link href="~/Content/CartPage/cart.css" rel="stylesheet" />
}
@{
    var currentCart = NikoMealBox.DataAccess.Repository.CartRepository.GetCurrentCart();
}

<div class="shopping-process">
    <div class="container">
        <div class="step-bars" id="stepOne">
            <ul>
                <li>
                    <span>1</span>
                    商品確認
                </li>
                <li>
                    <span>2</span>
                    資料確認
                </li>
                <li>
                    <span>3</span>
                    付款確認
                </li>
            </ul>
        </div>

        <div class="hint-bar">
            <p>訂購金額未滿$600 無法外送</p>
        </div>

        <div class="ordered-items-title">
            <span>訂購品項</span>
            <span class="e">品名</span>
            <span class="e">單價NT$</span>
            <span class="e">數量</span>
            <span class="e">規格</span>
            <span class="e">小計NT$</span>
            <span class="e">刪除</span>
        </div>

        <div class="ordered-items">
            @Html.Partial("_CartAllPartial")
        </div>


        @*運費之後修*@
        <div class="ordered-items-footer">
            <a href="@Url.Action("Index","Products")">繼續選購光光商品</a>
            <p>
                購物金額 @currentCart.TotalAmount + 運費 $0=
                <span>@currentCart.TotalAmount</span>
            </p>
        </div>


        <div class="step-bars" id="stepTwo">
            <ul>
                <li>
                    <span>1</span>
                    商品確認
                </li>
                <li>
                    <span>2</span>
                    資料確認
                </li>
                <li>
                    <span>3</span>
                    付款確認
                </li>
            </ul>
        </div>

        @*表單*@
        <form action="~/CartAll/CheckOrderList" method="post">
            <div class="form-row">
                <div id="order-name" class="input-area">
                    <label for="username" class="required">你的姓名</label>
                    <input type="text" name="username" class="form-control" />
                </div>

                <div id="order-sex" class="input-area">
                    <label for="sex" class="required">性別</label>
                    <select class="form-control" name="sex">
                        <option value="男">男</option>
                        <option value="女">女</option>
                    </select>
                </div>

                <div id="order-phone" class="input-area">
                    <label for="phone" class="required">電話</label>
                    <input type="tel" name="phone" class="form-control" placeholder="範例：0912345678" />
                </div>

                <div id="order-mail" class="input-area">
                    <label for="mail">Email</label>
                    <input type="email" name="mail" class="form-control" placeholder="如需更換別的mail，再填即可" />
                </div>
            </div>

            <div class="form-row" id="address">
                <div id="order-city" class="input-area">
                    <label for="city" class="required">地址</label>
                    <select class="form-control" name="city">
                        <option value="台中市">台中市</option>
                    </select>
                </div>

                <div id="order-district" class="input-area">
                    <label for="district" class="required">市區</label>
                    <select class="form-control" name="district">
                        <option value="東區">東區</option>
                        <option value="西區">西區</option>
                        <option value="西屯區">西屯區</option>
                        <option value="中區">中區</option>
                        <option value="南區">南區</option>
                        <option value="南屯區">南屯區</option>
                        <option value="北區">北區</option>
                        <option value="北屯區">北屯區</option>
                        <option value="太平區">太平區</option>
                        <option value="大里區">大里區</option>
                    </select>
                </div>

                <div id="order-detail-address">
                    <label for="detailaddress" class="required">詳細地址</label>
                    <input type="text" name="detailaddress" class="form-control" />
                </div>
            </div>

            <div class="form-row">
                <div class="input-area" id="remark">
                    <label for="remark">備註說明</label>
                    <input type="text" name="remark" value="" class="form-control" />
                </div>
            </div>

            <div class="form-row" id="datetime">
                <div class="input-area" id="delivery-date">
                    <label for="deliverydate">送達日期</label>
                    <input type="date" name="deliverydate" class="form-control" />
                </div>

                <div class="input-area" id="delivery-time">
                    <label for="deliverytime">送達時段</label>
                    <input type="time" name="deliverytime" class="form-control" />
                </div>
            </div>


            <div class="step-bars" id="stepThree">
                <ul>
                    <li>
                        <span>1</span>
                        商品確認
                    </li>
                    <li>
                        <span>2</span>
                        資料確認
                    </li>
                    <li>
                        <span>3</span>
                        付款確認
                    </li>
                </ul>
            </div>

            <div class="form-row" id="payment">
                <div class="payment-checkbox-group">
                    <input type="radio" name="payment" value="信用卡付款" /> 信用卡付款
                    <input type="radio" name="payment" value="Line Pay" /> LINE Pay
                </div>
            </div>

            <div class="form-row" id="submit">
                <button class="submit-btn">下單購買</button>
            </div>
        </form>
        @*表單尾*@
    </div>
</div>

<script>
    function RemoveFromCartAll(productId) {
            $.ajax({
            type: 'POST',
                url: '@Url.Action("RemoveFromCart", "CartAll")',
                data: { id: productId }
            })
            .done(function (msg) {
                $('div.ordered-items').html(msg);
            });
        }
</script>
<script src="https://kit.fontawesome.com/05c128ff7b.js" crossorigin="anonymous"></script>
